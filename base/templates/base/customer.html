{% extends 'base/main.html' %}

{% block content %}

<section id="customer">
    <div class="container">

        <!-- first section starts -->
        <div class="row my-4">
            
            <!-- customer updating section -->
            <div class="col-md-4 g-4">
                <div class="card card-body">
                    <h3 class="fw-semibold">Customer : </h3>
                    <hr>
                    <a href="" class="btn btn-sm btn-outline-primary mb-2">Update Customer</a>
                    <a href="{% url 'create_order' customer.id %}?next={% url 'customer' customer.id %}" class="btn btn-sm btn-outline-primary">Place Order</a>
                </div>
            </div>

            <!-- customer info -->
            <div class="col-md-4 g-4">
                <div class="card card-body">
                    <h3 class="fw-semibold">Customer Info :</h3>
                    <hr>
                    <p><span class="fw-semibold">Email</span> : {{ customer.email }} </p>
                    <p class="mb-1"><span class="fw-semibold">Phone</span> : {{ customer.phone }}</p>
                </div>
            </div>

            <!-- total orders -->
            <div class="col-md-4 g-4">
                <div class="card card-body">
                    <h3 class="fw-semibold">Total Orders :</h3>
                    <hr>
                    <p class="text-center fs-3" style="padding: 6px;">{{ total_order }}</p>
                </div>
            </div>
        </div>
        <!-- first section ends -->


        <!-- second section starts -->
        <div class="row my-4">
            <div class="card card-body">
                <form action="" method="get">
                    <div class="row g-2 align-items-end">
                        <!-- product filter -->
                        <div class="col-sm-6 col-lg-3 gx-4 gy-3 ">
                            {{ myFilter.form.product }}
                        </div>

                        <!-- status filter -->
                        <div class="col-sm-6 col-lg-3  gx-4 gy-3 ">
                            {{ myFilter.form.status }}
                        </div>

                        <!-- start date filter -->
                        <div class="col-sm-6 col-lg-3 gx-4 gy-3 ">
                            <div class="row g-1 align-items-center">
                                <div class="col-auto">
                                    <label class="form-label mb-0 text-nowrap me-1">
                                        From
                                    </label>
                                </div>
                                <div class="col">
                                    {{ myFilter.form.start_date }}
                                </div>
                            </div>
                        </div>

                        <!-- end date filter -->
                        <div class="col-sm-6 col-lg-3 gx-4 gy-3 ">
                            <div class="row g-1 align-items-center">
                                <div class="col-auto">
                                    <label class="form-label mb-0 text-nowrap me-1">
                                        To
                                    </label>
                                </div>
                                <div class="col">
                                    {{ myFilter.form.end_date }}
                                </div>
                            </div>
                        </div>

                        <!-- note filter -->
                        <div class="col-lg-6  gy-3 gx-4">
                            {{ myFilter.form.note }}
                        </div>

                        <!-- search button -->
                        <div class="col-lg-12 gx-4 gy-3">
                            <button type="submit" class="btn btn-primary ">
                                Search
                            </button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
        <!-- second section ends -->


        <!-- third section starts -->
        <div class="row my-4">
            <div class="card card-body">
                <table class="table table-sm">
                    <tr>
                        <th>Product</th>
                        <th>Note</th>
                        <th>Category</th>
                        <th>Date Ordered</th>
                        <th>Status</th>
                        <th>Update</th>
                        <th>Remove</th>
                    </tr>

                    {% for order in orders %}
                        <tr>
                            <td>{{ order.product }}</td>
                            <td>{{ order.note }}</td>
                            <td>{{ order.product.category }}</td>
                            <td>{{ order.date_created | date:"M. j, Y" }}</td>
                            <td>{{ order.status }}</td>
                            <td>
                                <a href="{% url 'update_order' order.id %}?next={% url 'customer' customer.id %}" class="btn btn-sm btn-info">Update</a>
                            </td>
                            <td>
                                <a href="{% url 'delete_order' order.id %}?next={% url 'customer' customer.id %}" class="btn btn-sm btn-danger">Delete</a>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <!-- third section ends -->

    </div>
</section>

{% endblock %}