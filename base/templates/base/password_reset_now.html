{% load static %}
<!DOCTYPE html>
<html lang="en-US">
<head>
    <!-- meta tag -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta name="author" content="Athika Priya">
    <meta name="keywords" content="html, css, bootstrap, js, python, django, dbsqlite3">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- title -->
    <title>ClientHub</title>

    <!-- favicon -->
    <link rel="shortcut icon" href="{% static 'images/favicon.webp' %}" type="image/x-icon">

    <!-- font awesome cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">

    <!-- stylesheet -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">

    <!-- internal stylesheet starts -->
    <style>
        body{ 
            background: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url("{% static 'images/background_img.webp' %}"); 
            background-size: cover; 
            height: 100vh;
        }

        .card{ 
            background: rgba(255,255,255,0.15); 
            backdrop-filter: blur(10px); 
            border-radius: 10px; 
            border:1px solid rgba(255,255,255,0.25); 
            box-shadow:0 8px 32px rgba(0,0,0,0.25); 
            color:#fff; 
            width:360px;}

        .card h1,.card p,.card label{
            color:#fff;
        }

        .form-control{
            background: rgba(255,255,255,0.9); 
            border-radius:6px;
            padding:6px 8px;
        }

        .form-control:focus{
            border:1px solid #4cb4c7; 
            box-shadow:none;
        }
        
        .form-label{
            font-size:0.9rem; 
            margin-bottom:4px; 
            color:#fff;
        }

        .field{
            margin-bottom:8px;
        }

        .toggle-password{
            position:absolute; 
            top:34px; 
            right:12px; 
            cursor:pointer; 
            color:#555; 
            z-index:10;
        }

        .toggle-password:hover{
            color:#000;
        }

        .error-msg{
            font-size:0.85rem;
        }
    </style>

    <!-- internal stylesheet starts -->
</head>
<body>

    <main>
        <!-- request password form starts here -->
        <section id="reset-password-form">
            <div class="container min-vh-100 d-flex justify-content-center align-items-center">
                <div class="row mx-auto">
                    <div class="card card-body p-4 mx-auto">
                        <h1 class="fs-3 mb-3 fw-semibold text-center">Reset Password</h1>

                        <form method="POST">
                            {% csrf_token %}

                            <div class="field position-relative">
                                <label class="form-label">{{ form.new_password1.label }}</label>
                                {{ form.new_password1 }}
                                <span class="toggle-password"><i class="fa-solid fa-eye"></i></span>
                                <div>
                                    {% for error in form.new_password1.errors %}
                                        <small class="error-msg">
                                            <i class="fa-solid fa-triangle-exclamation"></i>
                                            {{ error }}
                                        </small><br>
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="field position-relative">
                                <label class="form-label">{{ form.new_password2.label }}</label>
                                {{ form.new_password2 }}
                                <span class="toggle-password"><i class="fa-solid fa-eye"></i></span>
                                <div>
                                    {% for error in form.new_password2.errors %}
                                        <small class="error-msg">
                                            <i class="fa-solid fa-triangle-exclamation"></i>
                                            {{ error }}
                                        </small><br>
                                    {% endfor %}
                                </div>
                            </div>

                            {% for message in messages %}
                                <p class="text-center text-white error-msg">
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                    {{ message }}
                                </p>
                            {% endfor %}

                            <div class="d-flex justify-content-center mt-4 mb-3">
                                <button type="submit" class="btn btn-light fw-semibold">Reset Password</button>
                            </div>
                        </form>

                        <p class="text-center mb-0 me-3">
                            Remembered password?
                            <a href="{% url 'login' %}" class="text-white text-decoration-underline fw-semibold ms-3">Login</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!-- request password form starts here -->
    </main>


    <!-- bootstrap js cdn -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.querySelectorAll('.toggle-password').forEach(function(toggle) {
            toggle.addEventListener('click', function() {
                const input = this.previousElementSibling; 
                const icon = this.querySelector('i');

                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
    </script>
</body>
</html>
